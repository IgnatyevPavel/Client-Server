# Клиент-серверная архитектура.
Клиент серверная архитектура - на этих двух словах клиент и сервер, строится практически всё айти с помощью этой архитектуры мы можем на устройстве открыть мессенджер телеграм\гугл и прочее. на пк открыть приложения которые куда то что то отправляют или откруда то что то берёт - это всё клиент серверная архитектура всё чем мы пользуемся на сегодня это приложения которые поддерживают клиент-серверную архитектуру
## что из себя может представлять клиент и сервер?

**Всё что отправляет запрос на сервер - Клиент. Сам сервер тоже может быть клиентом.**
везде где есть пользователь -  мобильное\веб-приложение\сайт в браузере\приложение на пк\ и т.д. это клиент. грубоговоря вы тыкаете пальцами в клиент, а клиент все запросы отправляет на сервер и получает от сервера ответы.
**отправляет запрос - клиент**


**Всё что приняло запрос и ответило - Сервер.**
всё куда клиент отправляет запросы по каким то сетевым протоколам это сервер, для простоты понятия
**принимант запрос - сервер**

## что может быть сервером?
есть несколько понятий сервера
+ сервер как железяка
+ дата центры - машины в больших залах, где всё гудит. место где стоит сервера, на которых по большому счёту держится весь интернет, по миру их сотни тысяч, их располагают недалеко от атомных\гидро\электро станций. чем ближе он построен, тем дешевле будет электричество. дата центры - промышленное
+ домашний пк тоже может быть сервером, так как на нём может быть запущена программа, которая принимает запросы и отправляет ответы, при правильной настройке
+ теоретически телефон тоже может быть сервером, тоже может принять запрос и отправлять ответы.
+ то есть любая железка способная принимать запрос и отправлять ответ утюг с микросхемой,умный холодильник с микросхемами с вайфаем или блютузом(если нет продуктов может заказать),
 и вам привезёт курьер товары

## кто может отправить запрос на клиент?
это как вот то что клиент в который вы пальцами тыкаете может отправить запрос
этот запрос может отправить сервер. вот другой сервер который стоит стоит, у него что-то по таймеру щёлкнуло, он пошёл обновился и забрал информацию в другое место
отправил реквест получил респонс
и вот в момент когда он отправлял реквест он был клиентом
а тот кто получил от него реквест тот был сервером
это если в общем говорить про серверы и клиенты

в современном мире все клиенты и сервера которые связанны с обычными пользователями всё отправляет информацию по протоколу HTTPS(Hyper text transfer protokol security), раньше был HTTP (Hyper text transfer protokol) протокол передачи гипертекста, его механика, этого базового протокола состоит в том что клиент отправляет запрос, сервер получает запрос и отправляет клиенту ответ на его запроc. то есть сервер сам по себе клиенту ничего не отправит, сервер ждёт слушает интернет, скажет ему там кто-то что-то, спросят или не спросят. спросят - ответит, не спросит - не ответит. это базовая механика HTTP протокола.

предположим что все открывали в браузере сайт с формой логина, так вот как это происходит
+ вы открываете свой браузер, вбиваете туда запрос https://ksendzov.com/login_form
+ отправляете в строчке браузера такой запрос
+ запрос попадает на сервер, 
+ сервер получает запрос и отвечает на клиент формой логина
+ на этой форме будет логин и пароль с кнопкой sign in если максимально упростить
+ предположим мы с вами заполняем логин и заполняем пароль правильными данными, нажимаем кнопку сигн ин
+ после того как вы нажмете кнопку синг ин клиент отправвит запрос на сервер в котором будут перреданы данные для того чтобы залогинить пользователя
+ когда оно всё прилетает? оно прилетает в API, как оно выглядит? https://ksendzov.com/user-login это будет запросом
+ когда вы со своего клиента, вбили какой то запрос в браузере и нажали на ентер, ваш запрос по сети интернет летит  в центральный комутатор вашей страны, не важно с мобильного интернета или в вайфая с квартиры\офиса, весь интернет страны работает через центральные комутаторы, которые обслуживаются гос компании внутри страны, исключение спутники старлину, там нет ЦК, спутники как точка доступа, минуя гос сети, блокировки, прослушки и тд, его невозможно контролировать.
все запросы с клиента летят в ЦК, который связан с мировой сетью дата центров и комутаторов. весь интернет в мире это кабеля которые тянутся по дну морей, под землёй и тд.
+ весь интернет страны проходит через одну гос компанию, любого пользователя можно отследить\послушать\посмотреть что он отправлят. весь интернет можно отследить.
+ даже если включен vpn когда идёт шифровка внутреннего канала и spuffing ip конечного адреса, тут уже как служба безоп будет работать если дано указание прослушать клиента, то сб и отдел к пишет в компании которые предоставляют услуги VPN сетей с предложением сотрудничать, или вы будете заблокированы для действия на территории конкретной страны
если vpn продолжает работать на территории страны, значит всё слито в сб. зарабатывает, продаёт vpn даже там где он заблокирован. если продолжает работать - ключи шифрования сдали
компании которые не поделились ключами шифрования, те компании блокируют на ЦК. если вы не используете старлинк или спутниковый интернет. то его просматривают. власти в любой момент могут просто отключить посейшение, заблокировать конкретный ip адреса которые предоставлены организацией, которая предлагает vpn услуги, у таких компаний не бесконечное количество серверов, их счётное количество, и ничего не стоит работкику ЦК в определённый игнор файл написать список IP адресов который просто будет игнорироваться ЦК. все пользователи которые будут туда стучаться, они не получат ответов ЦК будет их резать. 
+ ваш запросик летит на ЦК
+ с ЦК улетает на DNS(domain name servises) 
вы же отправляете запросик ksendzov.com, под этим человекопонятным названием лежит такая вот штука - 22.43.121.210 это называется IP адрес. почему так сделали? потому что человек не ассоциирует свой ресурс с цифрами, а вот с буквами и словом, ассоциировать интернет ресурс вполне себе нормально, но машина коммутаторный сервер, ему надо цифры, так вот чтобы был матч цифер и слов существует DNS сервер. как раз эти DNS говорят где по какому айпишнику сидит вот этот вот ресурс ksendzov.com. DNS отвечает что ksendzov.com сидит на 22.43.121.210 и ЦК отправляет запрос на сервер ksendzov.com. всё сервер получает запрос, отправляет ответ, ответ приходит на клиент.

всё что отправляется в окошках браузера отправляется в ЦК потом в DNS и потом на сервер.
## Что значит сервер принял запрос?
кто понимает что вам ответить?
когда бэкэнд програмисты и фронтэнд програмисты пилят свою часть
бэк - сервер 
фронт-клиент
они договариваются какие кнопки, какие запросы будут отправлять бэк этнд програмисты понимаю как эти запросы принимать и что отвечать клиенту, чтобы клиент это всё понял
получается что? API (aplication program interface) это набор точек в которые можно что=то отправить и получить ответ, если отправить запрос не в эту точку, то ответа от сервера будет 404 NOT FOUND.
так вот бэк с фронтом договариваются, если с баузера прилетает запрос ksendzov.com/login form мы хотим логин форм, и то что написано бэком смотрит ksendzov.com это к нам, а login form это эндпоинт, набор точек куда клиент может что-то спросить и сервер что-то ответит, одна из точек это login form 
то есть клиент знает, в его код вписаны адреса этих точек сервера, по которым надо что=то спрашивать
login form это не случайное слово, когда вы на клиенте нажали на кнопку залогиниться эта кнопка отправляет запрос на эндпоинт login form сервер получает запрос конкретно в эндпоинт API(состоит из точек касания) сервер получает запрос в точку касания которая называется логин-форм дальше бэк прогеры знают если у нас пришёл запрос в логин форм, надо отдать форму логина. эта механика она и програмируется бэк и фронт прогерами
что значит отдать формочку логина?
фрондэндеры написали HTML CSS JS файлики которые если их правильно прочитать представляют из себя что-то человеко вразумительное понтное, куда можно тыкнуть пальцем и ввести слова
получается что сервер берёт текстовй файл JS и CSS(каскад стайл шитс) и HTML (найти перевод) это всё текст, сервер эти три файла пакует, заварачивает это всё в ответ (респонс) и отдаёт на клиент. т.е. запрос на логин форму, запаковал отправил клиенту
клиент (браузер хром, сафари, тор и т.д.) браузер получает на себя эти три файла HTML CSS JS. если человек не шарящий, откроет эти файлы, то там будет текст. никакой кнопочки куда нажать он не увидит, но чтобы он увидел эту кнопку, в браузере существует движок который принимает эти файлики, парсит(прочитывает) их понимает что там написано и на основании текста в этих 3х файлах, рисует (рендерит) человекопонятную картинку
в этих файликах описано: поле в которое можно ввести какой то текст, будет стоять вот здесь, в него будет вписан плейсхолдер - логин, пассворд(поле 2) будет распологаться здесь в него можно ввести какой то абракадабра текст, чуть ниже справа, будет располагаться кнопка сигн ин будет срабатывать валидация правильности введённых данных, и если данные введены правильно, то отправляется запрос уже по другому эндпоинту юзер-логин на наш сервер в эндпоинт юзер-огин, здесь у нас поинт логин форм, а тут юзер логин, бэк принимает этот запрос он видит что ему постучали в апи в эндпоиню юзер-логин, значит в теле этого запроса должны лежать логин и пароль пользователя, эта логика написана заранее, бэк с фронтом договорились. вы нам логин и пасс отправляйте в эндпоинт юзер логин в json формате. бэк пишут у себя в апи открывают эндпоинт юзер логин и они знаю что если пришёл запрос в этот эндпоинт то в бади должны быть логин и пароль, то либо падает сервер, 500 либо на клиент, нету логина и пароля,
дальше сервер принимает этот логин и пароль, провалидировал и идём в базу данных, 
## что делает база данных?
она хранит. 
наш сервер спрашивает у базы. база, вот такой логин в тебе есть? база - есть. сервер - хорошо. мы прошли **идентификацию.(вопрос с обеседования.)**
когда мы проверили что существует  логин в базе это была идентификация.

теперь сервер спрашивает, а пароль к этому логину такой? тот ли юзер, тот ли логин у нас был тогда зарегистрирован,
база - да есть, это именно тот самый кто у нас тогда регистрировался, это его пароль, это прошла 
**аутентификацция** - подтверждена аутентичность, уникальность этого поьзователя в нашей системе

сервер спрашивает, раз всё есть дай мне его личные данные, дальше идёт обработка к каким данным пользователь имеет доступ, если он относится к группе обычных клиентов, то он имеет доступ только к своим данным, его личным данным - это была **авторизация** проверка на доступную информацию, проверка прав доступа, к чему клиент имеет право прикоснуться. к чему не может.
база ответила
сервер - запакуй всю его личную информацию, он как залогиненый пользователь захочет лазить по сайту, давай выдадем ему токен ключ сервер сохраняет себе токен ключ и вместе с одданой информацией от базы пакует всё это в HTML CSS JS и токен, и отправляет клиенту
браузер парсит полученное, пользователь видит и может взаимодействовать с интерфейсом - это что касается двухуровневой клиент - серверной архитекторуой сервер первый уровень, база данных второй уровень.

## сервер может спрашивать информацию не только у базы данных но и у других серверов web service 
когда серверу необходимо спросить доп. информацию. допустим информацию о выдаче кредита по этому данному пресонажу. сервер банка не хранит информацию о судимости, но он может спросить информацию у сервера мвд и в этот момент наш сервер становиться клиентом, который у сервера мвд спрашивает информацию о судимостях этого конкретного субьекто, человека. ему сервер отвечает судимостей алиментов нет и дел по непогашенным кредитам тоже нет. у банка возрастает скоринговый бал. и говорит слушай норм чел давай дадим ему кредит
хорошо
вот так оно и работает
так вот когда ещё получается какой то веб сервис, ещё какой то  есть third party сервис, можете частенько услышать такое слово third - третья сторона то это трёхуровневая клиеент-серверная архитектура или многоуровневая клиент-серверная архитектура. здесь как повезёт, смотря с кем общаться
знайте, другие веб сервися с внешней стороны не с серверов нашей компании, а просто дополнительный сервис откуда мы берём информацию это third party сервис.
ещё немного метафор про понимание.
изобретение общей клиент-серверной архитектуры - это база, это основа

# про ip про доменное имя API и клиент-серверную
все мы с вами живём в каких то зданиях, ну или стараемся жить в зданиях, так вот чтобы мы с вами могли таксисту или по карте найти нужное нам здание, нам надо в голове знать держать, помнить адрес, конкретного здания, допустим этот адрес, это улица свободы 4, мы такие ага улица свободы 4, понятно, где то я это помню, надо посмотреть на карте ага вот эта точка вот это здание. и мы уже такие идём до ул. свободы 4 и ксендзов.ком это словестные обозначения циферных данных, цифровых данных. у каждого здания в городе, вообще любого здания на територии государства, есть кадастровый номер и кадастровый реестр это в свою очередь DNS(domain name service) к которому если спросить, а вот это вот цифорка по какому адресу находиться, или вот этот адрес у него какая цифра, и там есть циферная комбинация в кадастровом реестре. но вам же не хочется запоминать кадастровый номер, проще запомнить улю свободы 4. 

мы нашли наш дом ул свободы 4. когда мы его видим прям перед собой это здание. мы же не будем в стену идти, чтобы зайти в это здание. нет мы так не сделаем, мы будем искать вход в это здание. входы внутри здания это падьезды или парадные. в айтишке это называется порт. если у вас айпи 22.33.44.55:5001 то вот 5001 это порт по которому можно в это здание зайти, по которому можно в этот сервер постучаться

нашли падьезд. подходим к двери падьезда, там есть домофон. домофон и набор квартиры это API вы просто в порт если будете стучаться 
нажимаете номер квартиры, конкретный эндпоинт - номер квартиры

ещё одна интерпритация API - вождение автомобился
вы клиент - водитель
руль, переключение передач, газ, тормоз, сцепление, магнитола, дворники и т.д. все функции - это API это интерфейс управления вашим автомобилем, что Login form или user-login. то в машине это будет сцепление и газ. а двигатель топливная система, аккумуляторы, фильтра, бортовой компьютер - это всё бэкэнд
и с помощью руля и прочих рычажков управляете этим бэкендом. ну или ещё одна интерпритация api это кофе или ресторан. вот вы пришли в ресторан вы сели, вам подают меню. меню оно и на сайте называется меню
и вот вы официанту говорите, мне пожалуйста вот это. официант такой, есть принял.
вы сидите за столиком - клиент
официант - API
кухня - бэкенд, вы как привило бэка не видите
официант приносит блюдо 

# в чём разница 
клиент сервисная архитектура и микросервисная архитектура?

веб сервисы это те же сервера, но с распределёнными обязанностями, кто то отвечает за хранение, валидацию, передачу данных в базу отвечает за спрашивание где-то на стороне, какой- то информации
на веб сервисах, большой наш сервер разбит на маленькие сервачки, которые выполняют его функции. т.е. оно либо написано монолитно, когда большой сервер за всё отвечает. либо написана микросервисная архитектура, где у каждого сервера свой выделенный функционал. либо гибрид есть и монолит и вынесено на микросервися, смотря как програмисты напилят. у каждого микросервиса есть айпишник порт своё апи такие же сервера, просто с урезанным функционалом относительно большого монолита 

# что такое токен пользователя?
уникальный ключ
строчка которая содержит текст цдзулцзопз34шег2049гк203шое2 аброкадабра данных, является уникальным кодом, сервер отдаёт этот уникальный код и клиент дальше по запросикам где пользователь должен быть залогинен. сервер каждый раз спрашивает токен у клиента. не будет пропуска тебя никуда не пустят. по этому пропуску ещё надо понимать где ты можешь быть, где нет
и если токен сгорает, то сервер режет его у себя и как только ты приходишь спрашивать со своим уже сгоревшем на сервере ключиком, сервер скажет ещё раз клиент логинься, и посмотрим что ты там хочешь.

# толстый тонкий клиент
тонкий - клиент который не несёт на себе основной функциональности в плане обработки данных, хранения данных, тонкие клиенты не несут

толстый клиент - несёт этот функционал, хранит данные, мозно их обрабатывает, сдаёт передаёт, толстый клиент - пример игры типо танчики, вов, контра, то что много чего делает на машине пользования. 

трейдинговые платформы - много информации обрабатывается, хранится это толстый клиент

тонкий - это лендинг сайт
толстый - онлайн игры

цк - полувоенная структура, туда не просто попасть
тор что делает? 
спрашиваешь сайт через тор, тор перед тем как отправить запрос на центральный комутатор, он его зашифровывает, на ЦК прилетает зашифрованная абракадабра. но там будет инфа о сервере, куда улетит запрос, сервер - впн тора, прокси сервер тора, на него пирлетает запрос, сервер смотрит куда на самом деле должен идти запрос, сервак отправляет запрос на целевой сервер, сервер отвечает, тор впн прокси получает ответ от сервера, зашифровывает и отправляет на ЦК твой страны чтобы дошло до тебя
тор браузер расшифровывает информацию и показывает человекопонятную картинку.
снифинг возможен? возможен если будет ключ шифрования и дешефровки

# бывает ли сервер без базы данных?
конвертор валют
он берёт данные от криптобиржи, данные с фиатной биржи и отправляет их тебе у себя их не хранит
рабочие файлы не считаются базой данных
что считается базой данных?

# что входит в апи? - эндпоинты



